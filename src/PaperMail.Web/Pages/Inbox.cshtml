@page
@model PaperMail.Web.Pages.InboxModel
@{
    ViewData["Title"] = "Inbox";
}

<div class="container">
    <header class="page-header">
        <h1>Inbox</h1>
        <a href="/compose" class="btn btn-primary">Compose</a>
    </header>

    @if (!Model.Emails.Any())
    {
        <div class="empty-state">
            <p>No emails in your inbox</p>
            <p class="mt-4"><a href="/compose" class="btn btn-primary">Compose your first email</a></p>
        </div>
    }
    else
    {
        <div class="space-y-0">
            @foreach (var email in Model.Emails)
            {
                <article class="email-item @(email.IsRead ? "read" : "unread")" data-email-id="@email.Id">
                    <a href="/email/@email.Id" class="block p-4 no-underline hover:bg-eink-gray-light">
                        <div class="flex items-start justify-between mb-2">
                            <span class="flex-1 truncate">@email.From</span>
                            <time class="text-sm ml-4" datetime="@email.ReceivedAt.ToString("o")">
                                @email.ReceivedAt.ToString("MMM dd")
                            </time>
                        </div>
                        <h2 class="text-lg mb-1">@email.Subject</h2>
                        @if (email.HasAttachments)
                        {
                            <span class="text-sm" aria-label="Has attachments">üìé Attachment</span>
                        }
                    </a>
                </article>
            }
        </div>

        @if (Model.TotalPages > 1)
        {
            <nav class="pagination" aria-label="Page navigation">
                @if (Model.CurrentPage > 0)
                {
                    <a href="?page=@(Model.CurrentPage - 1)" class="btn btn-secondary" accesskey="p">‚Üê Previous</a>
                }
                else
                {
                    <span></span>
                }
                <span class="pagination-info">Page @(Model.CurrentPage + 1) of @Model.TotalPages</span>
                @if (Model.CurrentPage < Model.TotalPages - 1)
                {
                    <a href="?page=@(Model.CurrentPage + 1)" class="btn btn-secondary" accesskey="n">Next ‚Üí</a>
                }
            </nav>
        }
    }
</div>
